import{ag as $,a1 as G,a$ as q,b0 as J,b1 as O,af as W,b2 as X,a3 as x,at as C,a5 as o,aq as Z,ar as Q,as as ee,a2 as D,aK as k,aa as te,al as E,ab as T,aR as se,aS as ne,aT as ie,aL as P,aw as B,ax as re,a7 as A,ay as ae,aA as le,ah as z,aV as oe,ap as de,an as ce,am as fe,a4 as ge,b3 as F,av as he,aj as j,aN as ue,aO as pe,b4 as ye,ae as me,aX as ve,a_ as N,b5 as be,b6 as Re,a9 as Se,aJ as Ee,aU as xe,ac as Ce}from"./index-9255898f.js";var we=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';$(we);function M(i,e){let t=[];for(let s=0;s<e;s+=1)t[s]=[];for(let s of i)t[s.row].push(s);return t}function H(i,e){let t=[];for(let s=0;s<e;s+=1)t[s]=[];for(let s of i)t[s.firstCol].push(s);return t}function L(i,e){let t=[];if(i){for(let s=0;s<e;s+=1)t[s]={affectedInstances:i.affectedInstances,isEvent:i.isEvent,segs:[]};for(let s of i.segs)t[s.row].segs.push(s)}else for(let s=0;s<e;s+=1)t[s]=null;return t}const V=G({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function U(i){let{display:e}=i.eventRange.ui;return e==="list-item"||e==="auto"&&!i.eventRange.def.allDay&&i.firstCol===i.lastCol&&i.isStart&&i.isEnd}class _ extends z{render(){let{props:e}=this;return o(oe,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:V,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class K extends z{render(){let{props:e,context:t}=this,{options:s}=t,{seg:r}=e,n=s.eventTimeFormat||V,a=de(r,n,t,!0,e.defaultDisplayEventEnd);return o(fe,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:ce(e.seg,t),defaultGenerator:De,timeText:a,isResizing:!1,isDateSelecting:!1}))}}function De(i){return o(E,null,o("div",{className:"fc-daygrid-event-dot",style:{borderColor:i.borderColor||i.backgroundColor}}),i.timeText&&o("div",{className:"fc-event-time"},i.timeText),o("div",{className:"fc-event-title"},i.event.title||o(E,null," ")))}class ke extends z{constructor(){super(...arguments),this.compileSegs=x(Te)}render(){let{props:e}=this,{allSegs:t,invisibleSegs:s}=this.compileSegs(e.singlePlacements);return o(xe,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:t,hiddenSegs:s,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let r=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return o(E,null,t.map(n=>{let a=n.eventRange.instance.instanceId;return o("div",{className:"fc-daygrid-event-harness",key:a,style:{visibility:r[a]?"hidden":""}},U(n)?o(K,Object.assign({seg:n,isDragging:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},T(n,e.todayRange))):o(_,Object.assign({seg:n,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:a===e.eventSelection,defaultDisplayEventEnd:!1},T(n,e.todayRange))))}))}})}}function Te(i){let e=[],t=[];for(let s of i)e.push(s.seg),s.isVisible||t.push(s.seg);return{allSegs:e,invisibleSegs:t}}const Me=G({week:"narrow"});class He extends D{constructor(){super(...arguments),this.rootElRef=C(),this.state={dayNumberId:ge()},this.handleRootEl=e=>{F(this.rootElRef,e),F(this.props.elRef,e)}}render(){let{context:e,props:t,state:s,rootElRef:r}=this,{options:n,dateEnv:a}=e,{date:l,dateProfile:g}=t;const f=t.showDayNumber&&Ie(l,g.currentRange,a);return o(pe,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...t.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},t.extraDataAttrs),t.showDayNumber?{"aria-labelledby":s.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:Pe,date:l,dateProfile:g,todayRange:t.todayRange,showDayNumber:t.showDayNumber,isMonthStart:f,extraRenderProps:t.extraRenderProps},(c,m)=>o("div",{ref:t.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:t.minHeight}},t.showWeekNumber&&o(he,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:j(e,l,"week"),date:l,defaultFormat:Me}),!m.isDisabled&&(t.showDayNumber||ue(n)||t.forceDayTop)?o("div",{className:"fc-daygrid-day-top"},o(c,{elTag:"a",elClasses:["fc-daygrid-day-number",f&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},j(e,l)),{id:s.dayNumberId})})):t.showDayNumber?o("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},o("a",{className:"fc-daygrid-day-number"}," ")):void 0,o("div",{className:"fc-daygrid-day-events",ref:t.fgContentElRef},t.fgContent,o("div",{className:"fc-daygrid-day-bottom",style:{marginTop:t.moreMarginTop}},o(ke,{allDayDate:l,singlePlacements:t.singlePlacements,moreCnt:t.moreCnt,alignmentElRef:r,alignGridTop:!t.showDayNumber,extraDateSpan:t.extraDateSpan,dateProfile:t.dateProfile,eventSelection:t.eventSelection,eventDrag:t.eventDrag,eventResize:t.eventResize,todayRange:t.todayRange}))),o("div",{className:"fc-daygrid-day-bg"},t.bgContent)))}}function Pe(i){return i.dayNumberText||o(E,null," ")}function Ie(i,e,t){const{start:s,end:r}=e,n=ye(r,-1),a=t.getYear(s),l=t.getMonth(s),g=t.getYear(n),f=t.getMonth(n);return!(a===g&&l===f)&&(i.valueOf()===s.valueOf()||t.getDay(i)===1&&i.valueOf()<r.valueOf())}function Ne(i,e,t,s,r,n,a){let l=new Oe;l.allowReslicing=!0,l.strictOrder=s,e===!0||t===!0?(l.maxCoord=n,l.hiddenConsumes=!0):typeof e=="number"?l.maxStackCnt=e:typeof t=="number"&&(l.maxStackCnt=t,l.hiddenConsumes=!0);let g=[],f=[];for(let u=0;u<i.length;u+=1){let v=i[u],{instanceId:S}=v.eventRange.instance,R=r[S];R!=null?g.push({index:u,thickness:R,span:{start:v.firstCol,end:v.lastCol+1}}):f.push(v)}let c=l.addSegs(g),m=l.toRects(),{singleColPlacements:b,multiColPlacements:d,leftoverMargins:p}=We(m,i,a),h=[],y=[];for(let u of f){d[u.firstCol].push({seg:u,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let v=u.firstCol;v<=u.lastCol;v+=1)b[v].push({seg:w(u,v,v+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let u=0;u<a.length;u+=1)h.push(0);for(let u of c){let v=i[u.index],S=u.span;d[S.start].push({seg:w(v,S.start,S.end,a),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let R=S.start;R<S.end;R+=1)h[R]+=1,b[R].push({seg:w(v,R,R+1,a),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let u=0;u<a.length;u+=1)y.push(p[u]);return{singleColPlacements:b,multiColPlacements:d,moreCnts:h,moreMarginTops:y}}function We(i,e,t){let s=ze(i,t.length),r=[],n=[],a=[];for(let l=0;l<t.length;l+=1){let g=s[l],f=[],c=0,m=0;for(let d of g){let p=e[d.index];f.push({seg:w(p,l,l+1,t),isVisible:!0,isAbsolute:!1,absoluteTop:d.levelCoord,marginTop:d.levelCoord-c}),c=d.levelCoord+d.thickness}let b=[];c=0,m=0;for(let d of g){let p=e[d.index],h=d.span.end-d.span.start>1,y=d.span.start===l;m+=d.levelCoord-c,c=d.levelCoord+d.thickness,h?(m+=d.thickness,y&&b.push({seg:w(p,d.span.start,d.span.end,t),isVisible:!0,isAbsolute:!0,absoluteTop:d.levelCoord,marginTop:0})):y&&(b.push({seg:w(p,d.span.start,d.span.end,t),isVisible:!0,isAbsolute:!1,absoluteTop:d.levelCoord,marginTop:m}),m=0)}r.push(f),n.push(b),a.push(m)}return{singleColPlacements:r,multiColPlacements:n,leftoverMargins:a}}function ze(i,e){let t=[];for(let s=0;s<e;s+=1)t.push([]);for(let s of i)for(let r=s.span.start;r<s.span.end;r+=1)t[r].push(s);return t}function w(i,e,t,s){if(i.firstCol===e&&i.lastCol===t-1)return i;let r=i.eventRange,n=r.range,a=me(n,{start:s[e].date,end:W(s[t-1].date,1)});return Object.assign(Object.assign({},i),{firstCol:e,lastCol:t-1,eventRange:{def:r.def,ui:Object.assign(Object.assign({},r.ui),{durationEditable:!1}),instance:r.instance,range:a},isStart:i.isStart&&a.start.valueOf()===n.start.valueOf(),isEnd:i.isEnd&&a.end.valueOf()===n.end.valueOf()})}class Oe extends ve{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const t=super.addSegs(e),{entriesByLevel:s}=this,r=n=>!this.forceHidden[N(n)];for(let n=0;n<s.length;n+=1)s[n]=s[n].filter(r);return t}handleInvalidInsertion(e,t,s){const{entriesByLevel:r,forceHidden:n}=this,{touchingEntry:a,touchingLevel:l,touchingLateral:g}=e;if(this.hiddenConsumes&&a){const f=N(a);if(!n[f])if(this.allowReslicing){const c=Object.assign(Object.assign({},a),{span:be(a.span,t.span)}),m=N(c);n[m]=!0,r[l][g]=c,this.splitEntry(a,t,s)}else n[f]=!0,s.push(a)}return super.handleInvalidInsertion(e,t,s)}}class Y extends D{constructor(){super(...arguments),this.cellElRefs=new k,this.frameElRefs=new k,this.fgElRefs=new k,this.segHarnessRefs=new k,this.rootElRef=C(),this.state={framePositions:null,maxContentHeight:null,eventInstanceHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:t,context:s}=this,{options:r}=s,n=e.cells.length,a=H(e.businessHourSegs,n),l=H(e.bgEventSegs,n),g=H(this.getHighlightSegs(),n),f=H(this.getMirrorSegs(),n),{singleColPlacements:c,multiColPlacements:m,moreCnts:b,moreMarginTops:d}=Ne(te(e.fgEventSegs,r.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,r.eventOrderStrict,t.eventInstanceHeights,t.maxContentHeight,e.cells),p=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return o("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((h,y)=>{let u=this.renderFgSegs(y,e.forPrint?c[y]:m[y],e.todayRange,p),v=this.renderFgSegs(y,Be(f[y],m),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return o(He,{key:h.key,elRef:this.cellElRefs.createRef(h.key),innerElRef:this.frameElRefs.createRef(h.key),dateProfile:e.dateProfile,date:h.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&y===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:h.extraRenderProps,extraDataAttrs:h.extraDataAttrs,extraClassNames:h.extraClassNames,extraDateSpan:h.extraDateSpan,moreCnt:b[y],moreMarginTop:d[y],singlePlacements:c[y],fgContentElRef:this.fgElRefs.createRef(h.key),fgContent:o(E,null,o(E,null,u),o(E,null,v)),bgContent:o(E,null,this.renderFillSegs(g[y],"highlight"),this.renderFillSegs(a[y],"non-business"),this.renderFillSegs(l[y],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,t){let s=this.props;this.updateSizing(!q(e,s))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,t,s,r,n,a,l){let{context:g}=this,{eventSelection:f}=this.props,{framePositions:c}=this.state,m=this.props.cells.length===1,b=n||a||l,d=[];if(c)for(let p of t){let{seg:h}=p,{instanceId:y}=h.eventRange.instance,u=y+":"+e,v=p.isVisible&&!r[y],S=p.isAbsolute,R="",I="";S&&(g.isRtl?(I=0,R=c.lefts[h.lastCol]-c.lefts[h.firstCol]):(R=0,I=c.rights[h.firstCol]-c.rights[h.lastCol])),d.push(o("div",{className:"fc-daygrid-event-harness"+(S?" fc-daygrid-event-harness-abs":""),key:u,ref:b?null:this.segHarnessRefs.createRef(u),style:{visibility:v?"":"hidden",marginTop:S?"":p.marginTop,top:S?p.absoluteTop:"",left:R,right:I}},U(h)?o(K,Object.assign({seg:h,isDragging:n,isSelected:y===f,defaultDisplayEventEnd:m},T(h,s))):o(_,Object.assign({seg:h,isDragging:n,isResizing:a,isDateSelecting:l,isSelected:y===f,defaultDisplayEventEnd:m},T(h,s)))))}return d}renderFillSegs(e,t){let{isRtl:s}=this.context,{todayRange:r}=this.props,{framePositions:n}=this.state,a=[];if(n)for(let l of e){let g=s?{right:0,left:n.lefts[l.lastCol]-n.lefts[l.firstCol]}:{left:0,right:n.rights[l.firstCol]-n.rights[l.lastCol]};a.push(o("div",{key:ie(l.eventRange),className:"fc-daygrid-bg-harness",style:g},t==="bg-event"?o(se,Object.assign({seg:l},T(l,r))):ne(t)))}return o(E,{},...a)}updateSizing(e){let{props:t,state:s,frameElRefs:r}=this;if(!t.forPrint&&t.clientWidth!==null){if(e){let g=t.cells.map(f=>r.currentMap[f.key]);if(g.length){let f=this.rootElRef.current,c=new P(f,g,!0,!1);(!s.framePositions||!s.framePositions.similarTo(c))&&this.setState({framePositions:new P(f,g,!0,!1)})}}const n=this.state.eventInstanceHeights,a=this.queryEventInstanceHeights(),l=t.dayMaxEvents===!0||t.dayMaxEventRows===!0;this.safeSetState({eventInstanceHeights:Object.assign(Object.assign({},n),a),maxContentHeight:l?this.computeMaxContentHeight():null})}}queryEventInstanceHeights(){let e=this.segHarnessRefs.currentMap,t={};for(let s in e){let r=Math.round(e[s].getBoundingClientRect().height),n=s.split(":")[0];t[n]=Math.max(t[n]||0,r)}return t}computeMaxContentHeight(){let e=this.props.cells[0].key,t=this.cellElRefs.currentMap[e],s=this.fgElRefs.currentMap[e];return t.getBoundingClientRect().bottom-s.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(t=>e[t.key])}}Y.addStateEquality({eventInstanceHeights:q});function Be(i,e){if(!i.length)return[];let t=Ae(e);return i.map(s=>({seg:s,isVisible:!0,isAbsolute:!0,absoluteTop:t[s.eventRange.instance.instanceId],marginTop:0}))}function Ae(i){let e={};for(let t of i)for(let s of t)e[s.seg.eventRange.instance.instanceId]=s.absoluteTop;return e}class Fe extends D{constructor(){super(...arguments),this.splitBusinessHourSegs=x(M),this.splitBgEventSegs=x(M),this.splitFgEventSegs=x(M),this.splitDateSelectionSegs=x(M),this.splitEventDrag=x(L),this.splitEventResize=x(L),this.rowRefs=new k}render(){let{props:e,context:t}=this,s=e.cells.length,r=this.splitBusinessHourSegs(e.businessHourSegs,s),n=this.splitBgEventSegs(e.bgEventSegs,s),a=this.splitFgEventSegs(e.fgEventSegs,s),l=this.splitDateSelectionSegs(e.dateSelectionSegs,s),g=this.splitEventDrag(e.eventDrag,s),f=this.splitEventResize(e.eventResize,s),c=s>=7&&e.clientWidth?e.clientWidth/t.options.aspectRatio/6:null;return o(Ce,{unit:"day"},(m,b)=>o(E,null,e.cells.map((d,p)=>o(Y,{ref:this.rowRefs.createRef(p),key:d.length?d[0].date.toISOString():p,showDayNumbers:s>1,showWeekNumbers:e.showWeekNumbers,todayRange:b,dateProfile:e.dateProfile,cells:d,renderIntro:e.renderRowIntro,businessHourSegs:r[p],eventSelection:e.eventSelection,bgEventSegs:n[p].filter(je),fgEventSegs:a[p],dateSelectionSegs:l[p],eventDrag:g[p],eventResize:f[p],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:c,forPrint:e.forPrint}))))}componentDidMount(){const e=this.rowRefs.currentMap[0].getCellEls()[0];this.rootEl=e?e.closest(".fc-daygrid-body"):null,this.rootEl&&this.context.registerInteractiveComponent(this,{el:this.rootEl,isHitComboAllowed:this.props.isHitComboAllowed})}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new P(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new P(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,t){let{colPositions:s,rowPositions:r}=this,n=s.leftToIndex(e),a=r.topToIndex(t);if(a!=null&&n!=null){let l=this.props.cells[a][n];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(a,n),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(a,n),rect:{left:s.lefts[n],right:s.rights[n],top:r.tops[a],bottom:r.bottoms[a]},layer:0}}return null}getCellEl(e,t){return this.rowRefs.currentMap[e].getCellEls()[t]}getCellRange(e,t){let s=this.props.cells[e][t].date,r=W(s,1);return{start:s,end:r}}}function je(i){return i.eventRange.def.allDay}class Le extends D{constructor(){super(...arguments),this.elRef=C(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:t,dayMaxEvents:s,expandRows:r}=e,n=s===!0||t===!0;n&&!r&&(n=!1,t=null,s=null);let a=["fc-daygrid-body",n?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"];return o("div",{ref:this.elRef,className:a.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},o("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:r?e.clientHeight:""}},e.colGroupNode,o("tbody",{role:"presentation"},o(Fe,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:s,dayMaxEventRows:t,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=Ge(this.elRef.current,this.props.dateProfile);if(e){const t=e.closest(".fc-daygrid-body"),s=t.closest(".fc-scroller"),r=e.getBoundingClientRect().top-t.getBoundingClientRect().top;s.scrollTop=r?r+1:0}this.needsScrollReset=!1}}}function Ge(i,e){let t;return e.currentRangeUnit.match(/year|month/)&&(t=i.querySelector(`[data-date="${Re(e.currentDate)}-01"]`)),t||(t=i.querySelector(`[data-date="${Se(e.currentDate)}"]`)),t}class qe extends Ee{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,t){return t.sliceRange(e)}}class Ve extends D{constructor(){super(...arguments),this.slicer=new qe,this.tableRef=C()}render(){let{props:e,context:t}=this;return o(Le,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,t,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class $e extends J{buildRenderRange(e,t,s){let r=super.buildRenderRange(e,t,s),{props:n}=this;return Ue({currentRange:r,snapToWeek:/^(year|month)$/.test(t),fixedWeekCount:n.fixedWeekCount,dateEnv:n.dateEnv})}}function Ue(i){let{dateEnv:e,currentRange:t}=i,{start:s,end:r}=t,n;if(i.snapToWeek&&(s=e.startOfWeek(s),n=e.startOfWeek(r),n.valueOf()!==r.valueOf()&&(r=O(n,1))),i.fixedWeekCount){let a=e.startOfWeek(e.startOfMonth(W(t.end,-1))),l=Math.ceil(X(a,r));r=O(r,6-l)}return{start:s,end:r}}class _e extends D{constructor(){super(...arguments),this.headerElRef=C()}renderSimpleLayout(e,t){let{props:s,context:r}=this,n=[],a=B(r.options);return e&&n.push({type:"header",key:"header",isSticky:a,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n.push({type:"body",key:"body",liquid:!0,chunk:{content:t}}),o(A,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},o(re,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[],sections:n}))}renderHScrollLayout(e,t,s,r){let n=this.context.pluginHooks.scrollGridImpl;if(!n)throw new Error("No ScrollGrid implementation");let{props:a,context:l}=this,g=!a.forPrint&&B(l.options),f=!a.forPrint&&ae(l.options),c=[];return e&&c.push({type:"header",key:"header",isSticky:g,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),c.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:t}]}),f&&c.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:le}]}),o(A,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},o(n,{liquid:!a.isHeightAuto&&!a.forPrint,forPrint:a.forPrint,collapsibleWidth:a.forPrint,colGroups:[{cols:[{span:s,minWidth:r}]}],sections:c}))}}class Je extends _e{constructor(){super(...arguments),this.buildDayTableModel=x(Ke),this.headerRef=C(),this.tableRef=C()}render(){let{options:e,dateProfileGenerator:t}=this.context,{props:s}=this,r=this.buildDayTableModel(s.dateProfile,t),n=e.dayHeaders&&o(Z,{ref:this.headerRef,dateProfile:s.dateProfile,dates:r.headerDates,datesRepDistinctDays:r.rowCnt===1}),a=l=>o(Ve,{ref:this.tableRef,dateProfile:s.dateProfile,dayTableModel:r,businessHours:s.businessHours,dateSelection:s.dateSelection,eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!s.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:s.forPrint});return e.dayMinWidth?this.renderHScrollLayout(n,a,r.colCnt,e.dayMinWidth):this.renderSimpleLayout(n,a)}}function Ke(i,e){let t=new Q(i.renderRange,e);return new ee(t,/year|month|week/.test(i.currentRangeUnit))}export{Je as D,$e as T,Ve as a};
